-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ JUJUTSU SHENANIGANS â›©ï¸ â€” Eternal Cursed Hub v2.2 (IMPROVED)   â•‘
-- â•‘ UI: Fluent-Renewed (forked & updated)                          â•‘
-- â•‘ Melhorias: bug fixes, auto farm, teleport, FPS, mais opÃ§Ãµes    â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ CARREGAMENTO DA UI                   â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local Fluent          = loadstring(game:HttpGet("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()
local SaveManager     = loadstring(game:HttpGet("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/main/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/main/Addons/InterfaceManager.lua"))()

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ SERVIÃ‡OS                             â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local Players          = game:GetService("Players")
local RunService       = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TeleportService  = game:GetService("TeleportService")
local Workspace        = game:GetService("Workspace")
local Lighting         = game:GetService("Lighting")
local StarterGui       = game:GetService("StarterGui")
local VirtualUser      = game:GetService("VirtualUser")
local Camera           = Workspace.CurrentCamera
local lp               = Players.LocalPlayer
local Options          = Fluent.Options

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ VARIÃVEIS GLOBAIS DE ESTADO          â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local char, root, hum
local charConnections = {} -- conexÃµes do personagem atual para cleanup

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ HELPERS                              â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local function Notify(title, content, duration)
    Fluent:Notify({ Title = title, Content = content, Duration = duration or 4 })
end

local function SafeCall(fn)
    local ok, err = pcall(fn)
    if not ok then warn("[JJSHub] " .. tostring(err)) end
end

local function CleanConnections()
    for _, c in ipairs(charConnections) do
        if c then pcall(function() c:Disconnect() end) end
    end
    charConnections = {}
end

local function FindRemote(name)
    local searchRoots = {
        ReplicatedStorage,
        ReplicatedStorage:FindFirstChild("Remotes"),
        ReplicatedStorage:FindFirstChild("Events"),
        ReplicatedStorage:FindFirstChild("RemoteEvents"),
        ReplicatedStorage:FindFirstChild("RE"),
        ReplicatedStorage:FindFirstChild("Network"),
    }
    for _, folder in ipairs(searchRoots) do
        if folder then
            local r = folder:FindFirstChild(name, true)
            if r then return r end
        end
    end
    return nil
end

local function FireRemote(name, ...)
    local r = FindRemote(name)
    if r then
        if r:IsA("RemoteEvent") then
            SafeCall(function() r:FireServer(...) end)
        elseif r:IsA("RemoteFunction") then
            SafeCall(function() r:InvokeServer(...) end)
        end
        return true
    end
    return false
end

local function DistTo(obj)
    if not root then return math.huge end
    local pos
    if obj:IsA("BasePart") then
        pos = obj.Position
    elseif obj:IsA("Model") and obj.PrimaryPart then
        pos = obj.PrimaryPart.Position
    end
    if not pos then return math.huge end
    return (root.Position - pos).Magnitude
end

local function GetEnemies()
    local list = {}
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= lp and p.Character then
            local ph = p.Character:FindFirstChildOfClass("Humanoid")
            if ph and ph.Health > 0 then
                table.insert(list, p)
            end
        end
    end
    return list
end

local function GetNearestEnemy()
    local best, bestDist = nil, math.huge
    for _, p in ipairs(GetEnemies()) do
        local d = DistTo(p.Character)
        if d < bestDist then
            bestDist = d
            best = p
        end
    end
    return best, bestDist
end

local function GetLowestHPEnemy()
    local best, bestHP = nil, math.huge
    for _, p in ipairs(GetEnemies()) do
        local ph = p.Character:FindFirstChildOfClass("Humanoid")
        if ph and ph.Health < bestHP then
            bestHP = ph.Health
            best = p
        end
    end
    return best
end

local function GetEnergyValue(player)
    local c = player.Character
    if not c then return nil end
    local candidates = {"Energy","CursedEnergy","CE","Stamina","Mana","Power","Chi"}
    for _, name in ipairs(candidates) do
        local v = c:FindFirstChild(name, true) or player:FindFirstChild(name, true)
        if v and (v:IsA("NumberValue") or v:IsA("IntValue")) then
            return v
        end
    end
    return nil
end

-- Simula pressionar uma tecla
local function SimKey(key)
    local vi = Instance.new("InputObject")
    vi.KeyCode = key
    vi.UserInputType = Enum.UserInputType.Keyboard
    SafeCall(function() UserInputService.InputBegan:Fire(vi, false) end)
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ REFERÃŠNCIAS DE PERSONAGEM            â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local function RefreshChar()
    CleanConnections()
    char = lp.Character or lp.CharacterAdded:Wait()
    root = char:WaitForChild("HumanoidRootPart", 5)
    hum  = char:WaitForChild("Humanoid", 5)
end

RefreshChar()

lp.CharacterAdded:Connect(function()
    task.wait(1)
    RefreshChar()

    if hum then
        if Options.Speed     then hum.WalkSpeed  = Options.Speed.Value end
        if Options.JumpPower then
            hum.UseJumpPower = true
            hum.JumpPower    = Options.JumpPower.Value
        end
    end

    -- Re-aplicar toggles persistentes
    if Options.AntiStun and Options.AntiStun.Value then
        task.wait(0.3)
        ApplyAntiStun()
    end
    if Options.Fly and Options.Fly.Value then
        task.wait(0.5)
        EnableFly()
    end
    if Options.PlayerESP and Options.PlayerESP.Value then
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= lp then
                RemoveESP(p)
                task.wait(0.05)
                CreateESP(p)
            end
        end
    end
end)

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ ESP SYSTEM                           â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local ESPData = {}

local function CreateESP(player)
    if ESPData[player] or not player.Character then return end

    local h = Instance.new("Highlight")
    h.FillColor         = Options.ESPFillColor    and Options.ESPFillColor.Value    or Color3.fromRGB(160, 60, 255)
    h.OutlineColor      = Options.ESPOutlineColor and Options.ESPOutlineColor.Value or Color3.fromRGB(255, 255, 255)
    h.FillTransparency  = Options.ESPTransparency and Options.ESPTransparency.Value or 0.5
    h.OutlineTransparency = 0
    h.Adornee = player.Character
    h.Parent  = player.Character

    local pRoot = player.Character:FindFirstChild("HumanoidRootPart")
    local bb, nameLbl, hpLbl, energyLbl, distLbl

    if pRoot then
        bb = Instance.new("BillboardGui")
        bb.Size         = UDim2.new(0, 180, 0, 80)
        bb.StudsOffset  = Vector3.new(0, 4, 0)
        bb.AlwaysOnTop  = true
        bb.Adornee      = pRoot
        bb.Parent       = pRoot

        local function MakeLabel(parent, size, pos, color, font)
            local lbl = Instance.new("TextLabel", parent)
            lbl.Size                 = size
            lbl.Position             = pos
            lbl.BackgroundTransparency = 1
            lbl.TextColor3           = color or Color3.new(1,1,1)
            lbl.TextStrokeTransparency = 0
            lbl.Font                 = font or Enum.Font.Gotham
            lbl.TextScaled           = true
            return lbl
        end

        nameLbl   = MakeLabel(bb, UDim2.new(1,0,0.3,0),  UDim2.new(0,0,0,0),     Color3.new(1,1,1),                     Enum.Font.GothamBold)
        hpLbl     = MakeLabel(bb, UDim2.new(1,0,0.28,0), UDim2.new(0,0,0.3,0),   Color3.fromRGB(100, 255, 100))
        energyLbl = MakeLabel(bb, UDim2.new(1,0,0.25,0), UDim2.new(0,0,0.58,0),  Color3.fromRGB(100, 180, 255))
        distLbl   = MakeLabel(bb, UDim2.new(1,0,0.22,0), UDim2.new(0,0,0.82,0),  Color3.fromRGB(255, 220, 80))

        nameLbl.Text   = player.Name
        hpLbl.Text     = "â¤ ?"
        energyLbl.Text = ""
        distLbl.Text   = ""

        -- Listener de HP
        local ph = player.Character:FindFirstChildOfClass("Humanoid")
        if ph then
            local function updHP()
                hpLbl.Text = string.format("â¤ %d / %d", math.floor(ph.Health), math.floor(ph.MaxHealth))
            end
            updHP()
            ph:GetPropertyChangedSignal("Health"):Connect(updHP)
        end
    end

    ESPData[player] = {
        highlight = h,
        billboard = bb,
        nameLbl   = nameLbl,
        hpLbl     = hpLbl,
        energyLbl = energyLbl,
        distLbl   = distLbl,
    }
end

local function RemoveESP(player)
    local data = ESPData[player]
    if not data then return end
    if data.highlight and data.highlight.Parent then data.highlight:Destroy() end
    if data.billboard and data.billboard.Parent then data.billboard:Destroy() end
    ESPData[player] = nil
end

local function ClearAllESP()
    for p in pairs(ESPData) do RemoveESP(p) end
end

Players.PlayerRemoving:Connect(RemoveESP)
Players.PlayerAdded:Connect(function(p)
    p.CharacterAdded:Connect(function()
        task.wait(1.5)
        if Options.PlayerESP and Options.PlayerESP.Value then
            RemoveESP(p)
            CreateESP(p)
        end
    end)
end)

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ FLY SYSTEM                           â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local FlyBV, FlyBG

function EnableFly()
    if not root then return end
    if FlyBV then FlyBV:Destroy() end
    if FlyBG then FlyBG:Destroy() end

    FlyBG             = Instance.new("BodyGyro", root)
    FlyBG.MaxTorque   = Vector3.new(9e9, 9e9, 9e9)
    FlyBG.P           = 1e4
    FlyBG.CFrame      = root.CFrame

    FlyBV             = Instance.new("BodyVelocity", root)
    FlyBV.MaxForce    = Vector3.new(9e9, 9e9, 9e9)
    FlyBV.Velocity    = Vector3.zero

    if hum then hum.PlatformStand = true end
    Notify("Movement", "âœˆ Fly ATIVADO â€” WASD + E (subir) / Q (descer)")
end

local function DisableFly()
    if FlyBV then FlyBV:Destroy() FlyBV = nil end
    if FlyBG then FlyBG:Destroy() FlyBG = nil end
    if hum then hum.PlatformStand = false end
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ ANTI-STUN / NO RAGDOLL               â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ApplyAntiStun()
    if not char then return end
    SafeCall(function()
        for _, obj in ipairs(char:GetDescendants()) do
            if obj:IsA("BallSocketConstraint") or obj:IsA("HingeConstraint") then
                obj.Enabled = false
            end
        end
        if hum then
            hum:SetStateEnabled(Enum.HumanoidStateType.Ragdoll,     false)
            hum:SetStateEnabled(Enum.HumanoidStateType.FallingDown,  false)
            hum:SetStateEnabled(Enum.HumanoidStateType.GettingUp,    false)
        end
    end)
end

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ CRIAÃ‡ÃƒO DA JANELA                    â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local Window = Fluent:CreateWindow({
    Title      = "JUJUTSU SHENANIGANS â›©ï¸",
    SubTitle   = "Eternal Cursed Hub v2.2",
    TabWidth   = 165,
    Size       = UDim2.fromOffset(660, 540),
    Acrylic    = true,
    Theme      = "Dark",
    MinimizeKey = Enum.KeyCode.RightControl,
})
Window.Visible = true

local Tabs = {
    Combat   = Window:AddTab({ Title = "Combat",     Icon = "swords" }),
    Skills   = Window:AddTab({ Title = "Techniques", Icon = "zap" }),
    Movement = Window:AddTab({ Title = "Movement",   Icon = "wind" }),
    Visuals  = Window:AddTab({ Title = "Visuals",    Icon = "eye" }),
    Player   = Window:AddTab({ Title = "Player",     Icon = "user" }),
    Misc     = Window:AddTab({ Title = "Misc",       Icon = "wrench" }),
    Settings = Window:AddTab({ Title = "Settings",   Icon = "settings" }),
}

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ âš”ï¸ ABA 1 â€” COMBAT                    â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Tabs.Combat:AddSection("Hitbox Manipulation")

Tabs.Combat:AddToggle("HitboxExp", {
    Title       = "Hitbox Expander",
    Description = "Aumenta o HumanoidRootPart dos inimigos para acertar mais fÃ¡cil",
    Default     = false,
})

Tabs.Combat:AddSlider("HitboxSize", {
    Title       = "Hitbox Size",
    Description = "Tamanho do hitbox expandido",
    Min         = 2, Max = 60, Default = 15, Rounding = 0,
})

Tabs.Combat:AddToggle("HitboxVisible", {
    Title       = "Mostrar Hitbox (Debug)",
    Description = "Torna o hitbox expandido semi-transparente para visualizar",
    Default     = false,
})

Tabs.Combat:AddSection("Kill Aura")

Tabs.Combat:AddToggle("KillAura", {
    Title       = "Kill Aura (Auto-Attack)",
    Description = "Ataca automaticamente inimigos dentro do raio",
    Default     = false,
})

Tabs.Combat:AddSlider("KillAuraRange", {
    Title       = "Kill Aura Range",
    Description = "DistÃ¢ncia mÃ¡xima para atacar",
    Min         = 5, Max = 150, Default = 30, Rounding = 0,
})

Tabs.Combat:AddSlider("KillAuraDelay", {
    Title       = "Kill Aura Delay (ms)",
    Description = "Intervalo entre cada ataque automÃ¡tico em milissegundos",
    Min         = 50, Max = 1000, Default = 200, Rounding = 0,
})

Tabs.Combat:AddDropdown("KillAuraPriority", {
    Title   = "Alvo PrioritÃ¡rio",
    Values  = {"Mais PrÃ³ximo", "Menor HP", "AleatÃ³rio"},
    Multi   = false,
    Default = 1,
})

Tabs.Combat:AddToggle("KillAuraTeleport", {
    Title       = "Teleportar ao Atacar",
    Description = "Teleporta atÃ© o inimigo antes de atacar",
    Default     = true,
})

Tabs.Combat:AddSection("Melee Mods")

Tabs.Combat:AddToggle("AutoBlock", {
    Title       = "Auto Block",
    Description = "Bloqueia automaticamente ataques recebidos",
    Default     = false,
})

Tabs.Combat:AddToggle("AutoCounter", {
    Title       = "Auto Counter / Parry",
    Description = "Tenta contrar ataques via remote",
    Default     = false,
})

Tabs.Combat:AddToggle("GodMode", {
    Title       = "God Mode (Imortal)",
    Description = "HP travado no mÃ¡ximo permanentemente",
    Default     = false,
})

Tabs.Combat:AddToggle("AutoCombo", {
    Title       = "Auto Combo (M1 Spam)",
    Description = "Executa combo de M1 automaticamente no inimigo mais prÃ³ximo",
    Default     = false,
})

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ âœ¨ ABA 2 â€” TECHNIQUES / SKILLS       â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Tabs.Skills:AddSection("Cursed Energy")

Tabs.Skills:AddToggle("InfEnergy", {
    Title       = "Infinite Cursed Energy",
    Description = "Trava a energia amaldiÃ§oada no mÃ¡ximo constantemente",
    Default     = false,
})

Tabs.Skills:AddToggle("NoCooldown", {
    Title       = "No Cooldown (All Skills)",
    Description = "Remove cooldown de todas as skills via atributos e remotes",
    Default     = false,
})

Tabs.Skills:AddToggle("AutoBlackFlash", {
    Title       = "Auto Black Flash Chain",
    Description = "Encadeia Black Flash automaticamente assim que disponÃ­vel",
    Default     = false,
})

Tabs.Skills:AddToggle("AutoSkills", {
    Title       = "Auto Use Skills (1-4)",
    Description = "Usa as skills automaticamente quando disponÃ­veis",
    Default     = false,
})

Tabs.Skills:AddSection("Domain Expansion")

Tabs.Skills:AddButton({
    Title       = "â›© Domain Expansion",
    Description = "RyÅiki Tenkai! â€” Dispara o remote de Domain Expansion",
    Callback    = function()
        local domainRemotes = {
            "DomainExpansion","Domain","RyokiTenkai",
            "Expand","ExpandDomain","SpecialMove","RyoikiTenkai",
        }
        local fired = false
        for _, name in ipairs(domainRemotes) do
            if FireRemote(name) then fired = true break end
        end
        -- Tenta clicar botÃ£o de GUI tambÃ©m
        local gui = lp:FindFirstChild("PlayerGui")
        if gui then
            for _, btn in ipairs(gui:GetDescendants()) do
                if btn:IsA("TextButton") or btn:IsA("ImageButton") then
                    local n = btn.Name:lower()
                    if n:find("domain") or n:find("expand") or n:find("ryoki") then
                        SafeCall(function() btn.MouseButton1Click:Fire() end)
                        fired = true
                    end
                end
            end
        end
        -- Simula teclas comuns para domain
        for _, k in ipairs({Enum.KeyCode.G, Enum.KeyCode.H, Enum.KeyCode.B}) do
            SimKey(k)
        end
        Notify("â›© Domain", fired and "RyÅiki Tenkai! âœ…" or "Remote nÃ£o encontrado â€” tente via tecla do jogo")
    end,
})

Tabs.Skills:AddButton({
    Title       = "ðŸ’¥ Auto Ultimate Move",
    Description = "Usa o ultimate/special disponÃ­vel imediatamente",
    Callback    = function()
        local ultRemotes = {"Ultimate","UltimateMove","Special","SpecialAttack","Super","Finisher","Ult"}
        for _, name in ipairs(ultRemotes) do FireRemote(name) end
        for _, key in ipairs({Enum.KeyCode.G, Enum.KeyCode.R, Enum.KeyCode.V, Enum.KeyCode.F, Enum.KeyCode.T}) do
            SimKey(key)
        end
        Notify("ðŸ’¥ Ultimate", "Ultimate disparado!")
    end,
})

Tabs.Skills:AddSection("Skill Keybinds")

Tabs.Skills:AddButton({
    Title    = "ðŸŒ€ Skill 1 (Q / Z)",
    Callback = function()
        for _, k in ipairs({Enum.KeyCode.Q, Enum.KeyCode.Z}) do SimKey(k) end
        FireRemote("Skill1"); FireRemote("UseSkill", 1)
    end,
})

Tabs.Skills:AddButton({
    Title    = "âš¡ Skill 2 (E / X)",
    Callback = function()
        for _, k in ipairs({Enum.KeyCode.E, Enum.KeyCode.X}) do SimKey(k) end
        FireRemote("Skill2"); FireRemote("UseSkill", 2)
    end,
})

Tabs.Skills:AddButton({
    Title    = "ðŸ”¥ Skill 3 (R / C)",
    Callback = function()
        for _, k in ipairs({Enum.KeyCode.R, Enum.KeyCode.C}) do SimKey(k) end
        FireRemote("Skill3"); FireRemote("UseSkill", 3)
    end,
})

Tabs.Skills:AddButton({
    Title    = "ðŸ’« Skill 4 (T / V)",
    Callback = function()
        for _, k in ipairs({Enum.KeyCode.T, Enum.KeyCode.V}) do SimKey(k) end
        FireRemote("Skill4"); FireRemote("UseSkill", 4)
    end,
})

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ ðŸƒ ABA 3 â€” MOVEMENT                  â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Tabs.Movement:AddSection("Speed & Jump")

Tabs.Movement:AddSlider("Speed", {
    Title       = "Flash Step Speed",
    Description = "Velocidade de movimento do sorcerer",
    Min = 0, Max = 350, Default = 16, Rounding = 0,
    Callback = function(v)
        if hum then hum.WalkSpeed = v end
    end,
})

Tabs.Movement:AddSlider("JumpPower", {
    Title       = "Jump Power",
    Description = "Altura do salto",
    Min = 0, Max = 400, Default = 50, Rounding = 0,
    Callback = function(v)
        if hum then
            hum.UseJumpPower = true
            hum.JumpPower = v
        end
    end,
})

Tabs.Movement:AddToggle("InfiniteJump", {
    Title       = "Infinite Jump",
    Description = "Salta infinitamente no ar",
    Default     = false,
})

Tabs.Movement:AddToggle("InfDash", {
    Title       = "Infinite Dash / Stamina",
    Description = "Stamina e dash sem cooldown",
    Default     = false,
})

Tabs.Movement:AddSection("Teleport")

Tabs.Movement:AddDropdown("TeleportTarget", {
    Title       = "Teleportar atÃ© Jogador",
    Description = "Escolha um jogador para teleportar instantaneamente",
    Values      = {"(nenhum)"},
    Multi       = false,
    Default     = 1,
})

Tabs.Movement:AddButton({
    Title       = "ðŸš€ Teleportar ao Jogador Selecionado",
    Description = "Teleporta imediatamente atÃ© o jogador escolhido acima",
    Callback    = function()
        local sel = Options.TeleportTarget and Options.TeleportTarget.Value
        if not sel or sel == "(nenhum)" then
            Notify("Teleport", "Selecione um jogador primeiro!")
            return
        end
        local target = Players:FindFirstChild(sel)
        if target and target.Character and root then
            local tRoot = target.Character:FindFirstChild("HumanoidRootPart")
            if tRoot then
                root.CFrame = tRoot.CFrame + Vector3.new(0, 0, 3)
                Notify("Teleport", "Teleportado atÃ© " .. sel .. "!")
            end
        else
            Notify("Teleport", "Jogador nÃ£o encontrado ou sem personagem.")
        end
    end,
})

-- Atualiza lista de jogadores no dropdown ao abrir a aba
do
    local function RefreshPlayerList()
        if not Options.TeleportTarget then return end
        local names = {"(nenhum)"}
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= lp then table.insert(names, p.Name) end
        end
        -- Fluent nÃ£o tem mÃ©todo Update em todos os forks â€” tenta silenciosamente
        SafeCall(function() Options.TeleportTarget:SetValues(names) end)
    end
    Players.PlayerAdded:Connect(RefreshPlayerList)
    Players.PlayerRemoving:Connect(RefreshPlayerList)
end

Tabs.Movement:AddSection("Fly Mode")

Tabs.Movement:AddToggle("Fly", {
    Title       = "Fly (LevitaÃ§Ã£o)",
    Description = "Flutua como um sorcerer de alto escalÃ£o. WASD + E/Q",
    Default     = false,
})

Options.Fly:OnChanged(function()
    if Options.Fly.Value then EnableFly() else DisableFly() end
end)

Tabs.Movement:AddSlider("FlySpeed", {
    Title   = "Fly Speed",
    Min = 10, Max = 600, Default = 90, Rounding = 0,
})

Tabs.Movement:AddSection("Defense & Utility")

Tabs.Movement:AddToggle("AntiStun", {
    Title       = "Anti-Stun / No Ragdoll",
    Description = "Previne ragdoll e stun de ataques inimigos",
    Default     = false,
})

Options.AntiStun:OnChanged(function()
    if Options.AntiStun.Value then ApplyAntiStun() end
end)

Tabs.Movement:AddToggle("Noclip", {
    Title       = "Noclip",
    Description = "Atravessa paredes (Ãºtil para explorar domÃ­nios)",
    Default     = false,
})

Tabs.Movement:AddToggle("AntiVoid", {
    Title       = "Anti Void",
    Description = "Teleporta de volta ao mapa se cair no void",
    Default     = false,
})

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ ðŸ‘ï¸ ABA 4 â€” VISUALS                   â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Tabs.Visuals:AddSection("Player ESP")

Tabs.Visuals:AddToggle("PlayerESP", {
    Title       = "Player ESP (Wallhack)",
    Description = "Destaca todos os players com highlight",
    Default     = false,
})

Options.PlayerESP:OnChanged(function()
    if Options.PlayerESP.Value then
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= lp then CreateESP(p) end
        end
        Notify("Visuals", "ESP Ativado âœ…")
    else
        ClearAllESP()
        Notify("Visuals", "ESP Desativado âŒ")
    end
end)

Tabs.Visuals:AddToggle("EnergyBarESP", {
    Title       = "Mostrar Energia no ESP",
    Description = "Exibe a energia amaldiÃ§oada no nametag do inimigo",
    Default     = false,
})

Tabs.Visuals:AddToggle("DistanceESP", {
    Title       = "Mostrar DistÃ¢ncia no ESP",
    Description = "Exibe a distÃ¢ncia em metros no nametag",
    Default     = true,
})

Tabs.Visuals:AddColorpicker("ESPFillColor", {
    Title   = "ESP Fill Color",
    Default = Color3.fromRGB(160, 60, 255),
})

Tabs.Visuals:AddColorpicker("ESPOutlineColor", {
    Title   = "ESP Outline Color",
    Default = Color3.fromRGB(255, 255, 255),
})

Tabs.Visuals:AddSlider("ESPTransparency", {
    Title   = "ESP Fill Transparency",
    Min = 0, Max = 1, Default = 0.5, Rounding = 2,
})

Tabs.Visuals:AddSection("World")

Tabs.Visuals:AddToggle("Fullbright", {
    Title       = "Fullbright / No Fog",
    Description = "Visibilidade total, sem sombras ou nÃ©voa",
    Default     = false,
})

Tabs.Visuals:AddToggle("NoEffects", {
    Title       = "Remove Screen Effects",
    Description = "Remove blur, bloom e outros efeitos de pÃ³s-processamento",
    Default     = false,
})

Tabs.Visuals:AddToggle("CustomFOV", {
    Title       = "Custom FOV",
    Description = "Muda o campo de visÃ£o da cÃ¢mera",
    Default     = false,
})

Tabs.Visuals:AddSlider("FOVValue", {
    Title   = "FOV",
    Min = 50, Max = 130, Default = 90, Rounding = 0,
    Callback = function(v)
        if Options.CustomFOV and Options.CustomFOV.Value then
            Camera.FieldOfView = v
        end
    end,
})

Options.CustomFOV:OnChanged(function()
    if not Options.CustomFOV.Value then
        Camera.FieldOfView = 70 -- padrÃ£o Roblox
    end
end)

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ ðŸ‘¤ ABA 5 â€” PLAYER                    â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Tabs.Player:AddSection("Character Info")

Tabs.Player:AddButton({
    Title       = "ðŸ“‹ Listar Remotes do Jogo",
    Description = "Imprime todos os RemoteEvents/Functions no output (F9)",
    Callback    = function()
        local count = 0
        for _, obj in ipairs(ReplicatedStorage:GetDescendants()) do
            if obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction") then
                print("[JJSHub Remote] " .. obj:GetFullName())
                count += 1
            end
        end
        Notify("Debug", count .. " remotes listados no output (F9)")
    end,
})

Tabs.Player:AddButton({
    Title       = "ðŸ” Listar Atributos do Personagem",
    Description = "Mostra atributos do char no output para encontrar nomes corretos",
    Callback    = function()
        if not char then Notify("Debug", "Sem personagem!") return end
        local attrs = char:GetAttributes()
        local count = 0
        for name, value in pairs(attrs) do
            print(string.format("[Attr] %s = %s", name, tostring(value)))
            count += 1
        end
        -- TambÃ©m lista NumberValues
        for _, obj in ipairs(char:GetDescendants()) do
            if obj:IsA("NumberValue") or obj:IsA("IntValue") then
                print(string.format("[Value] %s = %s", obj:GetFullName(), tostring(obj.Value)))
                count += 1
            end
        end
        Notify("Debug", count .. " atributos/values listados no output (F9)")
    end,
})

Tabs.Player:AddSection("Auto Farm")

Tabs.Player:AddToggle("AutoFarm", {
    Title       = "Auto Farm (Kill Loop)",
    Description = "Mata o inimigo mais prÃ³ximo em loop para farmar XP/recompensas",
    Default     = false,
})

Tabs.Player:AddSlider("AutoFarmRange", {
    Title       = "Auto Farm Range",
    Min = 10, Max = 200, Default = 50, Rounding = 0,
})

Tabs.Player:AddSection("FPS & Performance")

Tabs.Player:AddToggle("FPSUnlocker", {
    Title       = "FPS Unlocker (setfpscap)",
    Description = "Remove o limite de 60 FPS via setfpscap",
    Default     = false,
})

Options.FPSUnlocker:OnChanged(function()
    if Options.FPSUnlocker.Value then
        SafeCall(function()
            if setfpscap then setfpscap(0) end -- desbloqueado
        end)
        Notify("Performance", "FPS Unlocked! âœ… (se o executor suportar)")
    else
        SafeCall(function()
            if setfpscap then setfpscap(60) end
        end)
    end
end)

Tabs.Player:AddSlider("FPSCap", {
    Title       = "FPS Cap personalizado",
    Description = "Define um cap especÃ­fico de FPS (requer FPS Unlocker ON)",
    Min = 30, Max = 360, Default = 144, Rounding = 0,
    Callback = function(v)
        if Options.FPSUnlocker and Options.FPSUnlocker.Value then
            SafeCall(function() if setfpscap then setfpscap(v) end end)
        end
    end,
})

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ ðŸ”§ ABA 6 â€” MISC                      â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Tabs.Misc:AddSection("Server")

Tabs.Misc:AddButton({
    Title       = "ðŸ” Server Hop",
    Description = "Entra em outro servidor menos populado",
    Callback    = function()
        Notify("Misc", "Trocando servidor...")
        task.wait(0.5)
        SafeCall(function() TeleportService:Teleport(game.PlaceId, lp) end)
    end,
})

Tabs.Misc:AddButton({
    Title       = "ðŸ”Œ Rejoin",
    Description = "Reconecta no mesmo servidor",
    Callback    = function()
        Notify("Misc", "Reconectando...")
        task.wait(0.5)
        SafeCall(function()
            TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, lp)
        end)
    end,
})

Tabs.Misc:AddSection("Player Utilities")

Tabs.Misc:AddToggle("AutoRespawn", {
    Title       = "Auto Respawn",
    Description = "Respawna automaticamente ao morrer",
    Default     = false,
})

Tabs.Misc:AddButton({
    Title       = "ðŸ¤– Ativar Anti-AFK",
    Description = "Previne kick por inatividade (permanente atÃ© fechar o hub)",
    Callback    = function()
        lp.Idled:Connect(function()
            VirtualUser:Button2Down(Vector2.new(0, 0), Camera.CFrame)
            task.wait(1)
            VirtualUser:Button2Up(Vector2.new(0, 0), Camera.CFrame)
        end)
        Notify("Misc", "Anti-AFK ativado! âœ…")
    end,
})

Tabs.Misc:AddButton({
    Title       = "ðŸ’€ Kill Self (Respawn rÃ¡pido)",
    Description = "Mata o personagem para respawnar imediatamente",
    Callback    = function()
        if hum then hum.Health = 0 end
        Notify("Misc", "Respawnando...")
    end,
})

Tabs.Misc:AddButton({
    Title       = "ðŸ”” Reset Notifications",
    Description = "Limpa notificaÃ§Ãµes pendentes da UI",
    Callback    = function()
        StarterGui:SetCore("ResetButtonCallback", true)
        Notify("Misc", "NotificaÃ§Ãµes limpas âœ…")
    end,
})

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ RUNTIME LOOP (Heartbeat)             â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
local tickers = {
    combat   = 0,
    killAura = 0,
    skills   = 0,
    energy   = 0,
    espUpd   = 0,
    cooldown = 0,
    auto     = 0,
    farm     = 0,
    combo    = 0,
}

RunService.Heartbeat:Connect(function(dt)
    local ok = root and hum and char

    -- â”€â”€ Speed / Jump lock â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if ok then
        if Options.Speed and hum.WalkSpeed ~= Options.Speed.Value then
            SafeCall(function() hum.WalkSpeed = Options.Speed.Value end)
        end
        if Options.JumpPower and Options.JumpPower.Value ~= 50 then
            SafeCall(function()
                hum.UseJumpPower = true
                hum.JumpPower = Options.JumpPower.Value
            end)
        end
    end

    -- â”€â”€ God Mode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if ok and Options.GodMode and Options.GodMode.Value then
        SafeCall(function()
            if hum.MaxHealth ~= math.huge then hum.MaxHealth = math.huge end
            if hum.Health < 1e10 then hum.Health = math.huge end
        end)
    end

    -- â”€â”€ Noclip â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if ok and Options.Noclip and Options.Noclip.Value then
        SafeCall(function()
            for _, p in ipairs(char:GetDescendants()) do
                if p:IsA("BasePart") then p.CanCollide = false end
            end
        end)
    end

    -- â”€â”€ Anti Void â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if ok and Options.AntiVoid and Options.AntiVoid.Value then
        if root.Position.Y < -80 then
            SafeCall(function()
                root.CFrame = CFrame.new(root.Position.X, 50, root.Position.Z)
            end)
        end
    end

    -- â”€â”€ FOV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if Options.CustomFOV and Options.CustomFOV.Value and Options.FOVValue then
        Camera.FieldOfView = Options.FOVValue.Value
    end

    -- â”€â”€ Fly movement â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if Options.Fly and Options.Fly.Value and FlyBV and FlyBG and root then
        local vel = Vector3.zero
        local spd = Options.FlySpeed and Options.FlySpeed.Value or 90
        local cf  = Camera.CFrame

        if UserInputService:IsKeyDown(Enum.KeyCode.W) then vel = vel + cf.LookVector  end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then vel = vel - cf.LookVector  end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then vel = vel - cf.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then vel = vel + cf.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.E) then vel = vel + Vector3.yAxis  end
        if UserInputService:IsKeyDown(Enum.KeyCode.Q) then vel = vel - Vector3.yAxis  end

        FlyBV.Velocity = vel * spd
        FlyBG.CFrame   = cf
    end

    -- â”€â”€ Fullbright â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if Options.Fullbright and Options.Fullbright.Value then
        SafeCall(function()
            Lighting.Brightness    = 10
            Lighting.ClockTime     = 14
            Lighting.FogEnd        = 100000
            Lighting.FogStart      = 99999
            Lighting.GlobalShadows = false
            Lighting.Ambient       = Color3.fromRGB(178, 178, 178)
        end)
    end

    -- â”€â”€ Remove Screen Effects â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if Options.NoEffects and Options.NoEffects.Value then
        SafeCall(function()
            for _, fx in ipairs(Lighting:GetChildren()) do
                if fx:IsA("BlurEffect") or fx:IsA("BloomEffect")
                or fx:IsA("ColorCorrectionEffect") or fx:IsA("DepthOfFieldEffect")
                or fx:IsA("SunRaysEffect") then
                    fx.Enabled = false
                end
            end
        end)
    end

    -- â”€â”€ Auto Respawn â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if Options.AutoRespawn and Options.AutoRespawn.Value then
        if hum and hum.Health <= 0 then
            SafeCall(function() lp:LoadCharacter() end)
        end
    end

    -- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    -- HITBOX EXPANDER (0.3s)
    tickers.combat += dt
    if tickers.combat >= 0.3 then
        tickers.combat = 0
        if Options.HitboxExp and Options.HitboxExp.Value then
            local size = Options.HitboxSize and Options.HitboxSize.Value or 15
            SafeCall(function()
                for _, p in ipairs(Players:GetPlayers()) do
                    if p ~= lp and p.Character then
                        local pRoot = p.Character:FindFirstChild("HumanoidRootPart")
                        if pRoot then
                            pRoot.Size        = Vector3.new(size, size, size)
                            pRoot.CanCollide  = false
                            pRoot.Transparency = (Options.HitboxVisible and Options.HitboxVisible.Value) and 0.6 or 1
                        end
                    end
                end
            end)
        end
    end

    -- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    -- KILL AURA (delay configurÃ¡vel)
    local kaDelay = ((Options.KillAuraDelay and Options.KillAuraDelay.Value) or 200) / 1000
    tickers.killAura += dt
    if tickers.killAura >= kaDelay then
        tickers.killAura = 0

        if ok and Options.KillAura and Options.KillAura.Value then
            local range    = Options.KillAuraRange and Options.KillAuraRange.Value or 30
            local priority = Options.KillAuraPriority and Options.KillAuraPriority.Value or "Mais PrÃ³ximo"
            local target

            if priority == "Menor HP" then
                target = GetLowestHPEnemy()
            elseif priority == "AleatÃ³rio" then
                local enemies = GetEnemies()
                if #enemies > 0 then target = enemies[math.random(1, #enemies)] end
            else
                target = GetNearestEnemy()
            end

            if target and target.Character then
                local tRoot = target.Character:FindFirstChild("HumanoidRootPart")
                if tRoot then
                    local dist = (root.Position - tRoot.Position).Magnitude
                    if dist <= range then
                        -- Teleporta atrÃ¡s do inimigo se habilitado
                        if Options.KillAuraTeleport and Options.KillAuraTeleport.Value then
                            root.CFrame = CFrame.new(tRoot.Position, root.Position)
                                        * CFrame.new(0, 0, 2.5)
                        end
                        -- Dispara remotes de ataque
                        FireRemote("M1");      FireRemote("Attack", target)
                        FireRemote("Hit",target); FireRemote("Punch", target)
                        -- Simula clique
                        SafeCall(function()
                            local vi = Instance.new("InputObject")
                            vi.UserInputType = Enum.UserInputType.MouseButton1
                            UserInputService.InputBegan:Fire(vi, false)
                        end)
                    end
                end
            end
        end

        -- Auto Block (com debounce pelo prÃ³prio ticker)
        if ok and Options.AutoBlock and Options.AutoBlock.Value then
            SafeCall(function()
                FireRemote("Block", true)
                FireRemote("AutoBlock", true)
                SimKey(Enum.KeyCode.F)
            end)
        end

        -- Auto Counter
        if ok and Options.AutoCounter and Options.AutoCounter.Value then
            SafeCall(function()
                FireRemote("Counter")
                FireRemote("Parry")
                FireRemote("CounterAttack")
                SimKey(Enum.KeyCode.V)
            end)
        end
    end

    -- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    -- AUTO COMBO (0.15s)
    tickers.combo += dt
    if tickers.combo >= 0.15 then
        tickers.combo = 0
        if ok and Options.AutoCombo and Options.AutoCombo.Value then
            local nearest, dist = GetNearestEnemy()
            if nearest and dist <= (Options.KillAuraRange and Options.KillAuraRange.Value or 30) then
                SafeCall(function()
                    for _ = 1, 3 do
                        local vi = Instance.new("InputObject")
                        vi.UserInputType = Enum.UserInputType.MouseButton1
                        UserInputService.InputBegan:Fire(vi, false)
                    end
                    FireRemote("M1", nearest)
                end)
            end
        end
    end

    -- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    -- ENERGY / STAMINA LOCK (0.1s)
    tickers.energy += dt
    if tickers.energy >= 0.1 then
        tickers.energy = 0

        -- Infinite Energy
        if ok and Options.InfEnergy and Options.InfEnergy.Value then
            SafeCall(function()
                local candidates = {"Energy","CursedEnergy","CE","Stamina","Mana","Power","Chi"}
                for _, name in ipairs(candidates) do
                    local v = char:FindFirstChild(name, true) or lp:FindFirstChild(name, true)
                    if v and (v:IsA("NumberValue") or v:IsA("IntValue")) then
                        v.Value = v.MaxValue or 100
                    end
                    if char:GetAttribute(name) ~= nil then
                        char:SetAttribute(name, 100)
                    end
                end
                FireRemote("RefillEnergy"); FireRemote("SetEnergy", 100)
            end)
        end

        -- Infinite Dash
        if ok and Options.InfDash and Options.InfDash.Value then
            SafeCall(function()
                local dashCandidates = {"DashCooldown","Dash","StaminaDash","DashStamina","DashCount"}
                for _, name in ipairs(dashCandidates) do
                    local v = char:FindFirstChild(name, true)
                    if v and (v:IsA("NumberValue") or v:IsA("IntValue")) then v.Value = 0 end
                    if char:GetAttribute(name) ~= nil then char:SetAttribute(name, 0) end
                end
                FireRemote("RefillDash")
            end)
        end
    end

    -- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    -- NO COOLDOWN / AUTO SKILLS (0.5s)
    tickers.cooldown += dt
    if tickers.cooldown >= 0.5 then
        tickers.cooldown = 0

        if ok and Options.NoCooldown and Options.NoCooldown.Value then
            SafeCall(function()
                local cdNames = {"Cooldown","CD","SkillCooldown","AbilityCooldown","MoveCooldown"}
                for _, obj in ipairs(char:GetDescendants()) do
                    for _, n in ipairs(cdNames) do
                        if obj.Name:lower():find(n:lower()) then
                            if obj:IsA("NumberValue") or obj:IsA("IntValue") then
                                obj.Value = 0
                            end
                        end
                    end
                end
                -- Itera atributos corretamente (GetAttributes retorna dicionÃ¡rio)
                local attrs = char:GetAttributes()
                for attrName, _ in pairs(attrs) do
                    local ln = attrName:lower()
                    if ln:find("cooldown") or ln:find("cd") then
                        SafeCall(function() char:SetAttribute(attrName, 0) end)
                    end
                end
                FireRemote("ResetCooldowns"); FireRemote("NoCooldown")
            end)
        end

        if ok and Options.AutoSkills and Options.AutoSkills.Value then
            SafeCall(function()
                for _, k in ipairs({Enum.KeyCode.Q, Enum.KeyCode.E, Enum.KeyCode.R, Enum.KeyCode.Z, Enum.KeyCode.X, Enum.KeyCode.C}) do
                    SimKey(k)
                end
                for i = 1, 4 do FireRemote("UseSkill", i) end
            end)
        end

        if ok and Options.AutoBlackFlash and Options.AutoBlackFlash.Value then
            SafeCall(function()
                FireRemote("BlackFlash"); FireRemote("SpecialM1"); FireRemote("PoweredM1")
                local target = GetNearestEnemy()
                for _ = 1, 4 do
                    if target then FireRemote("M1", target) end
                end
            end)
        end
    end

    -- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    -- AUTO FARM (0.3s)
    tickers.farm += dt
    if tickers.farm >= 0.3 then
        tickers.farm = 0

        if ok and Options.AutoFarm and Options.AutoFarm.Value then
            local farmRange = Options.AutoFarmRange and Options.AutoFarmRange.Value or 50
            local nearest, dist = GetNearestEnemy()
            if nearest and nearest.Character then
                local tRoot = nearest.Character:FindFirstChild("HumanoidRootPart")
                if tRoot then
                    if dist > farmRange then
                        -- Vai atÃ© o inimigo
                        SafeCall(function()
                            root.CFrame = CFrame.new(tRoot.Position + Vector3.new(0, 0, 3))
                        end)
                    else
                        -- Ataca com todas as ferramentas disponÃ­veis
                        root.CFrame = CFrame.lookAt(root.Position, tRoot.Position)
                        FireRemote("M1", nearest)
                        FireRemote("Attack", nearest)
                        for i = 1, 3 do FireRemote("UseSkill", i) end
                        SafeCall(function()
                            local vi = Instance.new("InputObject")
                            vi.UserInputType = Enum.UserInputType.MouseButton1
                            UserInputService.InputBegan:Fire(vi, false)
                        end)
                    end
                end
            end
        end
    end

    -- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    -- ESP UPDATE (0.4s)
    tickers.espUpd += dt
    if tickers.espUpd >= 0.4 then
        tickers.espUpd = 0

        local fillColor    = Options.ESPFillColor    and Options.ESPFillColor.Value    or Color3.fromRGB(160, 60, 255)
        local outlineColor = Options.ESPOutlineColor and Options.ESPOutlineColor.Value or Color3.fromRGB(255, 255, 255)
        local fillAlpha    = Options.ESPTransparency and Options.ESPTransparency.Value or 0.5
        local showEnergy   = Options.EnergyBarESP    and Options.EnergyBarESP.Value
        local showDist     = Options.DistanceESP     and Options.DistanceESP.Value

        for p, data in pairs(ESPData) do
            -- Atualiza highlight
            if data.highlight and data.highlight.Parent then
                data.highlight.FillColor        = fillColor
                data.highlight.OutlineColor     = outlineColor
                data.highlight.FillTransparency = fillAlpha
            end

            -- Energy label
            if data.energyLbl then
                if showEnergy then
                    local eVal = GetEnergyValue(p)
                    data.energyLbl.Text = eVal and ("âš¡ " .. math.floor(eVal.Value)) or ""
                else
                    data.energyLbl.Text = ""
                end
            end

            -- Nome + distÃ¢ncia
            if data.nameLbl and root and p.Character then
                local pRoot = p.Character:FindFirstChild("HumanoidRootPart")
                if pRoot then
                    local dist = math.floor((root.Position - pRoot.Position).Magnitude)
                    if showDist then
                        data.nameLbl.Text = p.Name .. " [" .. dist .. "m]"
                    else
                        data.nameLbl.Text = p.Name
                    end
                end
            end
        end
    end
end)

-- â”€â”€ Infinite Jump â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
UserInputService.JumpRequest:Connect(function()
    if Options.InfiniteJump and Options.InfiniteJump.Value and hum then
        SafeCall(function() hum:ChangeState(Enum.HumanoidStateType.Jumping) end)
    end
end)

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘ âš™ï¸ SETTINGS                          â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})
InterfaceManager:SetFolder("JujutsuShenanigansHub")
SaveManager:SetFolder("JujutsuShenanigansHub/configs")
InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)
Window:SelectTab(1)
SaveManager:LoadAutoloadConfig()

Notify("â›©ï¸ JJS Hub v2.2", "RyÅiki Tenkai! Carregado com sucesso. RCtrl = minimizar.", 7)
