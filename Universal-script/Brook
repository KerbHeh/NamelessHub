-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘           BROOKHAVEN ADMIN HD  â€”  v9 COMPLETO                   â•‘
-- â•‘  Movimento Â· Jogador Â· Brookhaven Â· Visual Â· Mundo Â· Misc        â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function safeLoad(url, nome)
    local ok, res = pcall(function() return loadstring(game:HttpGet(url, true))() end)
    if not ok then error("[AdminHD] Falhou: "..nome.."\n"..tostring(res), 0) end
    return res
end

local Fluent           = safeLoad("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua",                                    "Fluent")
local SaveManager      = safeLoad("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua",      "SaveManager")
local InterfaceManager = safeLoad("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua", "InterfaceManager")

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
--  SERVIÃ‡OS
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
local Players     = game:GetService("Players")
local RunService  = game:GetService("RunService")
local UserInput   = game:GetService("UserInputService")
local Lighting    = game:GetService("Lighting")
local VirtualUser = game:GetService("VirtualUser")
local Debris      = game:GetService("Debris")
local LP          = Players.LocalPlayer

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
--  JANELA
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
local Window = Fluent:CreateWindow({
    Title       = "Brookhaven Admin HD",
    SubTitle    = "v9 COMPLETO  Â·  FE Safe",
    TabWidth    = 168,
    Size        = UDim2.fromOffset(700, 560),
    Acrylic     = false,
    Theme       = "Dark",
    MinimizeKey = Enum.KeyCode.RightControl,
})

local T = {
    Move = Window:AddTab({ Title = "Movimento",  Icon = "zap"      }),
    Play = Window:AddTab({ Title = "Jogador",    Icon = "user"     }),
    BK   = Window:AddTab({ Title = "Brookhaven", Icon = "car"      }),
    Vis  = Window:AddTab({ Title = "Visual",     Icon = "eye"      }),
    Wld  = Window:AddTab({ Title = "Mundo",      Icon = "globe"    }),
    Mis  = Window:AddTab({ Title = "Misc",       Icon = "star"     }),
    Cfg  = Window:AddTab({ Title = "Config",     Icon = "settings" }),
}

local Options = Fluent.Options

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
--  CONEXÃ•ES
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
local C = {}
local function con(k, sig, fn) if C[k] then C[k]:Disconnect() end; C[k] = sig:Connect(fn) end
local function dis(k) if C[k] then C[k]:Disconnect(); C[k] = nil end end

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
--  ATALHOS
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
local function getChar()  return LP.Character end
local function getRoot()  local c = getChar() return c and c:FindFirstChild("HumanoidRootPart") end
local function getHum()   local c = getChar() return c and c:FindFirstChildOfClass("Humanoid") end
local function getMouse() return LP:GetMouse() end
local function getCam()   return workspace.CurrentCamera end

local function notify(titulo, msg, dur)
    Fluent:Notify({ Title = titulo, Content = msg, Duration = dur or 4 })
end

local SCALES = {"BodyHeightScale","BodyDepthScale","BodyWidthScale","HeadScale"}
local function applyScale(s)
    local h = getHum(); if not h then return end
    for _, n in ipairs(SCALES) do local v = h:FindFirstChild(n); if v then v.Value = s end end
end

local ORIG = {
    Brightness    = Lighting.Brightness,
    ClockTime     = Lighting.ClockTime,
    FogEnd        = Lighting.FogEnd,
    FogColor      = Lighting.FogColor,
    GlobalShadows = Lighting.GlobalShadows,
    Ambient       = Lighting.Ambient,
}

-- Busca tool por nomes em backpack, char ou workspace inteiro
local function findTool(...)
    for _, n in ipairs({...}) do
        local f = LP.Backpack:FindFirstChild(n)
            or (getChar() and getChar():FindFirstChild(n))
            or workspace:FindFirstChild(n, true)
        if f then return f end
    end
    return nil
end

-- Busca qualquer BasePart com nome contendo palavras-chave (case insensitive)
local function findPartLike(...)
    local keywords = {...}
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") or obj:IsA("Model") then
            local name = obj.Name:lower()
            for _, kw in ipairs(keywords) do
                if name:find(kw:lower()) then return obj end
            end
        end
    end
    return nil
end

-- VehicleSeat mais prÃ³ximo (<=25 studs) ou atual
local function findSeat()
    local h = getHum()
    if h and h.SeatPart and h.SeatPart:IsA("VehicleSeat") then return h.SeatPart end
    local root = getRoot(); if not root then return nil end
    local best, bestDist = nil, 25
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("VehicleSeat") then
            local d = (obj.Position - root.Position).Magnitude
            if d < bestDist then bestDist = d; best = obj end
        end
    end
    return best
end

-- Aplica velocidade no seat usando TODOS os mÃ©todos disponÃ­veis
local function forceCarSpeed(seat, spd, trq)
    if not seat then return end
    -- MÃ©todo 1: direto
    pcall(function() seat.MaxSpeed = spd; seat.Torque = trq end)
    -- MÃ©todo 2: sethiddenproperty (suporte em Synapse/Delta)
    pcall(function() sethiddenproperty(seat, "MaxSpeed", spd) end)
    pcall(function() sethiddenproperty(seat, "Torque",   trq) end)
    -- MÃ©todo 3: via script local injetado no seat (contorna proteÃ§Ãµes leves)
    pcall(function()
        for _, s in ipairs(seat:GetChildren()) do
            if s:IsA("Script") or s:IsA("LocalScript") then
                s.Disabled = true
            end
        end
        seat.MaxSpeed = spd
        seat.Torque   = trq
    end)
end

local function playerList()
    local t = {}
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= LP then table.insert(t, p.Name) end
    end
    return #t > 0 and t or {"(nenhum)"}
end

LP.CharacterAdded:Connect(function()
    task.wait(1.5)
    local h = getHum(); if not h then return end
    if Options.WalkSpeed then h.WalkSpeed = Options.WalkSpeed.Value end
    if Options.JumpPower then h.JumpPower = Options.JumpPower.Value; h.JumpHeight = Options.JumpPower.Value end
    if Options.SizeScale then applyScale(Options.SizeScale.Value) end
    if Options.GodMode and Options.GodMode.Value then
        con("god", RunService.Heartbeat, function()
            local hm = getHum(); if hm then hm.Health = hm.MaxHealth end
        end)
    end
    -- Reativa car speed se estava ativo
    if Options.CarLoop and Options.CarLoop.Value then
        task.wait(0.5)
        local seat = findSeat()
        if seat then
            forceCarSpeed(seat,
                Options.CarSpeed  and Options.CarSpeed.Value  or 80,
                Options.CarTorque and Options.CarTorque.Value or 200
            )
        end
    end
end)

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                     ABA  MOVIMENTO                              â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

T.Move:AddParagraph({ Title = "Controle de Movimento", Content = "Sliders aplicam em tempo real. Sprint = Shift 2.5Ã—." })

T.Move:AddSlider("WalkSpeed", {
    Title = "Velocidade (WalkSpeed)", Description = "PadrÃ£o: 16",
    Default = 16, Min = 0, Max = 500, Rounding = 0,
    Callback = function(v) local h = getHum(); if h then h.WalkSpeed = v end end,
})

T.Move:AddSlider("JumpPower", {
    Title = "Pulo (JumpPower)", Description = "PadrÃ£o: 50",
    Default = 50, Min = 0, Max = 500, Rounding = 0,
    Callback = function(v) local h = getHum(); if h then h.JumpPower = v; h.JumpHeight = v end end,
})

T.Move:AddSlider("SizeScale", {
    Title = "Tamanho (Scale)", Description = "1 = normal | 0.1 = micro | 5 = gigante",
    Default = 1, Min = 0.1, Max = 5, Rounding = 2,
    Callback = function(v) applyScale(v) end,
})

T.Move:AddToggle("Sprint", {
    Title = "Sprint (Shift)", Description = "Shift = 2.5Ã— velocidade configurada",
    Default = false,
    Callback = function(v)
        dis("sprint")
        if not v then local h = getHum(); if h then h.WalkSpeed = Options.WalkSpeed.Value end; return end
        con("sprint", RunService.Heartbeat, function()
            local h = getHum(); if not h then return end
            h.WalkSpeed = Options.WalkSpeed.Value * (UserInput:IsKeyDown(Enum.KeyCode.LeftShift) and 2.5 or 1)
        end)
    end,
})

-- FLY
local flySpeed = 60; local flyActive = false

T.Move:AddToggle("Fly", {
    Title = "Voar (Fly)", Description = "WASD = direÃ§Ã£o | EspaÃ§o = subir | Ctrl = descer",
    Default = false,
    Callback = function(v)
        flyActive = v
        local root = getRoot(); if not root then return end
        if not v then
            dis("fly")
            for _, o in ipairs(root:GetChildren()) do
                if o:IsA("BodyVelocity") or o:IsA("BodyGyro") then o:Destroy() end
            end
            return
        end
        local bv = Instance.new("BodyVelocity"); bv.MaxForce = Vector3.new(1e5,1e5,1e5); bv.Velocity = Vector3.zero; bv.Parent = root
        local bg = Instance.new("BodyGyro"); bg.MaxTorque = Vector3.new(1e5,1e5,1e5); bg.D = 50; bg.Parent = root
        local cam = getCam()
        con("fly", RunService.Heartbeat, function()
            if not flyActive then return end
            root = getRoot(); if not root then return end
            local dir = Vector3.zero
            if UserInput:IsKeyDown(Enum.KeyCode.W)           then dir += cam.CFrame.LookVector  end
            if UserInput:IsKeyDown(Enum.KeyCode.S)           then dir -= cam.CFrame.LookVector  end
            if UserInput:IsKeyDown(Enum.KeyCode.A)           then dir -= cam.CFrame.RightVector end
            if UserInput:IsKeyDown(Enum.KeyCode.D)           then dir += cam.CFrame.RightVector end
            if UserInput:IsKeyDown(Enum.KeyCode.Space)       then dir += Vector3.new(0,1,0)     end
            if UserInput:IsKeyDown(Enum.KeyCode.LeftControl) then dir -= Vector3.new(0,1,0)     end
            bv.Velocity = dir.Magnitude > 0 and dir.Unit * flySpeed or Vector3.zero
            bg.CFrame   = cam.CFrame
        end)
    end,
})

T.Move:AddSlider("FlySpeedSlider", {
    Title = "Velocidade do Voo", Default = 60, Min = 10, Max = 500, Rounding = 0,
    Callback = function(v) flySpeed = v end,
})

T.Move:AddButton({
    Title = "Resetar Movimento",
    Callback = function()
        Options.WalkSpeed:SetValue(16); Options.JumpPower:SetValue(50); Options.SizeScale:SetValue(1)
        notify("Reset", "Movimento restaurado ao padrÃ£o.")
    end,
})

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                      ABA  JOGADOR                              â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

T.Play:AddToggle("GodMode", {
    Title = "God Mode", Description = "HP sempre no mÃ¡ximo", Default = false,
    Callback = function(v)
        dis("god")
        if v then con("god", RunService.Heartbeat, function()
            local h = getHum(); if h then h.Health = h.MaxHealth end
        end) end
    end,
})

T.Play:AddToggle("Noclip", {
    Title = "Noclip", Description = "Atravessa paredes", Default = false,
    Callback = function(v)
        dis("noclip")
        if v then
            con("noclip", RunService.Stepped, function()
                local c = getChar(); if not c then return end
                for _, p in ipairs(c:GetDescendants()) do if p:IsA("BasePart") then p.CanCollide = false end end
            end)
        else
            local c = getChar(); if not c then return end
            for _, p in ipairs(c:GetDescendants()) do if p:IsA("BasePart") then p.CanCollide = true end end
        end
    end,
})

T.Play:AddToggle("AntiAFK", {
    Title = "Anti-AFK", Description = "Nunca toma kick", Default = false,
    Callback = function(v)
        dis("afk")
        if v then con("afk", LP.Idled, function()
            VirtualUser:Button2Down(Vector2.new(0,0), getCam().CFrame)
            task.wait(0.1)
            VirtualUser:Button2Up(Vector2.new(0,0), getCam().CFrame)
        end) end
    end,
})

T.Play:AddToggle("Invisible", {
    Title = "Invisibilidade (local)", Default = false,
    Callback = function(v)
        local c = getChar(); if not c then return end
        for _, p in ipairs(c:GetDescendants()) do
            if p:IsA("BasePart") then p.LocalTransparencyModifier = v and 1 or 0 end
        end
    end,
})

-- Teleport Spawn
T.Play:AddButton({ Title = "Teleport â†’ Spawn", Callback = function()
    local root = getRoot(); local spawn = workspace:FindFirstChildOfClass("SpawnLocation")
    if root and spawn then root.CFrame = spawn.CFrame + Vector3.new(0,5,0); notify("Teleport","Chegou no Spawn!")
    else notify("Erro","SpawnLocation nÃ£o encontrado.") end
end })

-- Teleport Cursor
T.Play:AddButton({ Title = "Teleport â†’ Cursor", Callback = function()
    notify("Clique no chÃ£o","ESC cancela.")
    local tmp; tmp = UserInput.InputBegan:Connect(function(inp)
        if inp.UserInputType == Enum.UserInputType.MouseButton1 then
            local m = getMouse(); local r = getRoot()
            if r and m.Target then r.CFrame = CFrame.new(m.Hit.Position + Vector3.new(0,5,0)); notify("Teleport","Teleportado!") end
            tmp:Disconnect()
        elseif inp.KeyCode == Enum.KeyCode.Escape then tmp:Disconnect(); notify("Cancelado","") end
    end)
end })

T.Play:AddParagraph({ Title = "Teleport para Jogador", Content = "Selecione e clique no botÃ£o." })

local dropTp = T.Play:AddDropdown("TpTarget", {
    Title = "Selecionar Jogador", Values = playerList(), Default = playerList()[1],
    Multi = false, Callback = function(_) end,
})

T.Play:AddButton({ Title = "âš¡ Ir atÃ© o Jogador", Callback = function()
    local nome = Options.TpTarget and Options.TpTarget.Value
    if not nome or nome == "(nenhum)" then notify("Erro","Selecione um jogador."); return end
    local alvo = Players:FindFirstChild(nome); local root = getRoot()
    if alvo and alvo.Character and alvo.Character:FindFirstChild("HumanoidRootPart") and root then
        root.CFrame = alvo.Character.HumanoidRootPart.CFrame + Vector3.new(0,5,0)
        notify("Teleport","Chegou em "..nome.."!")
    else notify("Erro", nome.." nÃ£o disponÃ­vel.") end
end })

T.Play:AddButton({ Title = "ğŸ”„ Atualizar Lista", Callback = function()
    local l = playerList(); pcall(function() dropTp:SetValues(l); dropTp:SetValue(l[1]) end)
    notify("Atualizado", #l.." jogador(es).")
end })

Players.PlayerAdded:Connect(function()   task.wait(1);   pcall(function() dropTp:SetValues(playerList()) end) end)
Players.PlayerRemoving:Connect(function() task.wait(0.5); pcall(function() dropTp:SetValues(playerList()) end) end)

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                    ABA  BROOKHAVEN                             â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- â•â• CAR SPEED â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- POR QUE NÃƒO FUNCIONAVA ANTES:
-- O Brookhaven usa um Script server-side que reseta MaxSpeed a cada ~0.1s.
-- A soluÃ§Ã£o Ã© um loop Heartbeat que reaplica ANTES do server resetar,
-- combinado com desabilitar os scripts locais do seat e usar sethiddenproperty.

T.BK:AddParagraph({
    Title   = "ğŸš— Velocidade de VeÃ­culo",
    Content = "1. Entre no veÃ­culo\n2. Ajuste os sliders\n3. Ative o toggle abaixo\n4. Acelere normalmente",
})

T.BK:AddSlider("CarSpeed", {
    Title = "Velocidade MÃ¡xima", Description = "PadrÃ£o BK: ~80  |  Recomendado: 200-500",
    Default = 200, Min = 0, Max = 1000, Rounding = 0,
    Callback = function(v)
        local s = findSeat(); if s then forceCarSpeed(s, v, Options.CarTorque and Options.CarTorque.Value or 200) end
    end,
})

T.BK:AddSlider("CarTorque", {
    Title = "Torque (aceleraÃ§Ã£o)", Description = "PadrÃ£o: ~200  |  Alto = acelera mais rÃ¡pido",
    Default = 500, Min = 50, Max = 9999, Rounding = 0,
    Callback = function(v)
        local s = findSeat(); if s then forceCarSpeed(s, Options.CarSpeed and Options.CarSpeed.Value or 200, v) end
    end,
})

T.BK:AddToggle("CarLoop", {
    Title       = "ğŸ” Ativar Speed Hack (NECESSÃRIO)",
    Description = "Loop que forÃ§a os valores a cada frame â€” sem isso o BK reseta",
    Default     = false,
    Callback    = function(v)
        dis("carloop")
        if not v then
            local s = findSeat(); if s then pcall(function() s.MaxSpeed = 80; s.Torque = 200 end) end
            notify("Carro","Desativado."); return
        end
        notify("Carro ğŸš—","Speed hack ativo! Agora entre no carro e acelere.")
        con("carloop", RunService.Heartbeat, function()
            local s = findSeat(); if not s then return end
            local spd = Options.CarSpeed  and Options.CarSpeed.Value  or 200
            local trq = Options.CarTorque and Options.CarTorque.Value or 500
            forceCarSpeed(s, spd, trq)
        end)
    end,
})

T.BK:AddButton({
    Title = "âœ… DiagnÃ³stico do VeÃ­culo",
    Description = "Mostra info do VehicleSeat encontrado",
    Callback = function()
        local s = findSeat()
        if not s then
            notify("DiagnÃ³stico","Nenhum VehicleSeat encontrado em 25 studs.\nEntre no carro ou chegue mais perto.")
            return
        end
        notify("DiagnÃ³stico ğŸš—",
            ("Seat: %s\nMaxSpeed atual: %d\nTorque atual: %d\nPai: %s"):format(
                s.Name, s.MaxSpeed, s.Torque, s.Parent and s.Parent.Name or "?"),
            8
        )
    end,
})

-- â•â• VIEW PLAYER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

T.BK:AddParagraph({
    Title   = "ğŸ‘ï¸ View Player",
    Content = "CÃ¢mera vai para a perspectiva do jogador escolhido.",
})

local origCamSubject, origCamType = nil, nil

local dropAlvo = T.BK:AddDropdown("AlvoGeral", {
    Title = "Selecionar Alvo  (View / Fling / Void)",
    Values = playerList(), Default = playerList()[1],
    Multi = false, Callback = function(_) end,
})

T.BK:AddToggle("ViewActive", {
    Title = "ğŸ‘ï¸ Ativar View", Default = false,
    Callback = function(v)
        local cam = getCam()
        if not v then
            dis("view_lock")
            cam.CameraType    = origCamType or Enum.CameraType.Custom
            cam.CameraSubject = origCamSubject or getHum()
            origCamSubject = nil; origCamType = nil
            notify("View","CÃ¢mera restaurada."); return
        end
        local nome = Options.AlvoGeral and Options.AlvoGeral.Value
        local alvo = nome and Players:FindFirstChild(nome)
        if not alvo then notify("Erro","Jogador nÃ£o encontrado."); return end
        local alvoHum = alvo.Character and alvo.Character:FindFirstChildOfClass("Humanoid")
        if not alvoHum then notify("Erro", alvo.Name.." sem personagem."); return end
        origCamSubject    = cam.CameraSubject
        origCamType       = cam.CameraType
        cam.CameraType    = Enum.CameraType.Custom
        cam.CameraSubject = alvoHum
        con("view_lock", alvo.CharacterAdded, function(newChar)
            task.wait(1)
            local h = newChar:FindFirstChildOfClass("Humanoid")
            if h and Options.ViewActive and Options.ViewActive.Value then getCam().CameraSubject = h end
        end)
        notify("View ğŸ‘ï¸","CÃ¢mera em "..alvo.Name.."!")
    end,
})

T.BK:AddButton({ Title = "ğŸ”„ Atualizar Lista (Todos os dropdowns)", Callback = function()
    local lista = playerList()
    pcall(function() dropAlvo:SetValues(lista); dropAlvo:SetValue(lista[1])   end)
    pcall(function() dropTp:SetValues(lista);   dropTp:SetValue(lista[1])     end)
    notify("Atualizado", #lista.." jogador(es).")
end })

-- â•â• FLING COM BOLA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- COMO FUNCIONA NO FE (FilteringEnabled):
-- ColisÃ£o entre personagens NÃƒO replica no servidor.
-- O que funciona: criar/clonar uma BasePart, pegar
-- Network Ownership dela (assignnetworkowner ou fÃ­sica local),
-- teleportÃ¡-la em cima do alvo com BodyVelocity absurda.
-- A bola Ã© uma BasePart com fÃ­sicas ativas â€” quando o servidor
-- processa ela batendo no alvo (a bola tem network owner = vocÃª),
-- o alvo recebe o impulso e voa.

T.BK:AddParagraph({
    Title   = "âš½ Fling com Bola",
    Content = "Spawneia esferas infinitamente em cima do alvo.\nCada bola tem BodyVelocity absurda.\nPara quando o alvo morre ou vocÃª para.",
})

T.BK:AddSlider("BallForce", {
    Title = "ForÃ§a da Bola", Description = "PadrÃ£o: 300 | Mais = mais longe",
    Default = 300, Min = 50, Max = 1000, Rounding = 0,
})

T.BK:AddSlider("BallSize", {
    Title = "Tamanho da Bola", Description = "Maior = mais fÃ¡cil de acertar",
    Default = 4, Min = 1, Max = 20, Rounding = 0,
})

T.BK:AddSlider("BallRate", {
    Title = "Intervalo entre bolas (segundos)", Description = "0.05 = muito rÃ¡pido",
    Default = 0.08, Min = 0.03, Max = 1, Rounding = 2,
})

local ballFlingActive = false

T.BK:AddToggle("BallFlingToggle", {
    Title       = "âš½ Ativar Fling com Bola (loop infinito)",
    Description = "Para automaticamente se o alvo morrer",
    Default     = false,
    Callback    = function(v)
        ballFlingActive = v
        if not v then notify("Fling âš½","Parado."); return end

        local nome = Options.AlvoGeral and Options.AlvoGeral.Value
        local alvo = nome and Players:FindFirstChild(nome)
        if not alvo then
            notify("Erro","Selecione um alvo no dropdown primeiro.")
            Options.BallFlingToggle:SetValue(false)
            return
        end

        notify("Fling âš½","Spawnando bolas em "..nome.." continuamente!")

        task.spawn(function()
            local balls = {} -- guarda bolas criadas para limpar depois

            while ballFlingActive do
                -- Verifica se alvo ainda estÃ¡ vivo
                local alvoChar = alvo.Character
                local alvoRoot = alvoChar and alvoChar:FindFirstChild("HumanoidRootPart")
                local alvoHum  = alvoChar and alvoChar:FindFirstChildOfClass("Humanoid")

                -- Para se o alvo morreu
                if not alvoRoot or not alvoHum or alvoHum.Health <= 0 then
                    ballFlingActive = false
                    if Options.BallFlingToggle then
                        pcall(function() Options.BallFlingToggle:SetValue(false) end)
                    end
                    notify("Fling âš½","Alvo morreu! Fling parado automaticamente.")
                    break
                end

                -- Cria a esfera
                local ball = Instance.new("Part")
                ball.Name            = "AdminBall"
                ball.Shape           = Enum.PartType.Ball
                ball.Size            = Vector3.new(
                    Options.BallSize and Options.BallSize.Value or 4,
                    Options.BallSize and Options.BallSize.Value or 4,
                    Options.BallSize and Options.BallSize.Value or 4
                )
                ball.Material        = Enum.Material.SmoothPlastic
                ball.BrickColor      = BrickColor.new("Bright red")
                ball.CanCollide      = true
                ball.Massless        = false
                ball.CFrame          = alvoRoot.CFrame + Vector3.new(0, 3, 0)
                ball.Parent          = workspace

                -- Tenta pegar network ownership da bola
                pcall(function() ball:SetNetworkOwner(LP) end)

                -- DireÃ§Ã£o: sempre em cima do alvo com spread aleatÃ³rio
                local force = Options.BallForce and Options.BallForce.Value or 300
                local dir   = (alvoRoot.Position - ball.Position + Vector3.new(
                    math.random(-30, 30),
                    math.random(10, 60),
                    math.random(-30, 30)
                )).Unit

                local bv = Instance.new("BodyVelocity", ball)
                bv.MaxForce = Vector3.new(1e9, 1e9, 1e9)
                bv.Velocity = dir * force

                -- Remove a bola depois de 2 segundos
                table.insert(balls, ball)
                Debris:AddItem(ball, 2)

                -- Limpa lista de bolas antigas
                if #balls > 50 then
                    for i = 1, 10 do
                        pcall(function() if balls[i] then balls[i]:Destroy() end end)
                    end
                    for i = 1, 10 do table.remove(balls, 1) end
                end

                task.wait(Options.BallRate and Options.BallRate.Value or 0.08)
            end

            -- Limpa todas as bolas ao parar
            for _, b in ipairs(balls) do pcall(function() b:Destroy() end) end
            balls = {}
        end)
    end,
})

-- â•â• FLING COM BARCO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

T.BK:AddParagraph({
    Title   = "â›µ Fling com Barco",
    Content = "Spawneia blocos grandes (simulando barco) em cima do alvo.\nMesma mecÃ¢nica da bola mas com impacto maior.",
})

local boatFlingActive = false

T.BK:AddToggle("BoatFlingToggle", {
    Title       = "â›µ Ativar Fling com Barco (loop infinito)",
    Description = "Para automaticamente se o alvo morrer",
    Default     = false,
    Callback    = function(v)
        boatFlingActive = v
        if not v then notify("Fling â›µ","Parado."); return end

        local nome = Options.AlvoGeral and Options.AlvoGeral.Value
        local alvo = nome and Players:FindFirstChild(nome)
        if not alvo then
            notify("Erro","Selecione um alvo no dropdown primeiro.")
            pcall(function() Options.BoatFlingToggle:SetValue(false) end); return
        end

        notify("Fling â›µ","Spawnando barcos em "..nome.."!")

        task.spawn(function()
            local boats = {}

            while boatFlingActive do
                local alvoChar = alvo.Character
                local alvoRoot = alvoChar and alvoChar:FindFirstChild("HumanoidRootPart")
                local alvoHum  = alvoChar and alvoChar:FindFirstChildOfClass("Humanoid")

                if not alvoRoot or not alvoHum or alvoHum.Health <= 0 then
                    boatFlingActive = false
                    pcall(function() Options.BoatFlingToggle:SetValue(false) end)
                    notify("Fling â›µ","Alvo morreu! Parado automaticamente.")
                    break
                end

                -- Cria "barco" (bloco grande e pesado)
                local boat = Instance.new("Part")
                boat.Name       = "AdminBoat"
                boat.Size       = Vector3.new(8, 4, 14)  -- tamanho de barco
                boat.Material   = Enum.Material.SmoothPlastic
                boat.BrickColor = BrickColor.new("Bright blue")
                boat.CanCollide = true
                boat.Massless   = false
                -- Spawna acima e levemente ao lado do alvo
                boat.CFrame = alvoRoot.CFrame
                    * CFrame.new(math.random(-3,3), 8, math.random(-3,3))
                boat.Parent = workspace

                pcall(function() boat:SetNetworkOwner(LP) end)

                local bv = Instance.new("BodyVelocity", boat)
                bv.MaxForce = Vector3.new(1e9, 1e9, 1e9)
                -- Cai em cima + forÃ§a lateral
                local force = Options.BallForce and Options.BallForce.Value or 300
                bv.Velocity = Vector3.new(
                    math.random(-force/2, force/2),
                    -(force * 1.5),  -- forÃ§a pra baixo = esmaga o alvo
                    math.random(-force/2, force/2)
                )

                table.insert(boats, boat)
                Debris:AddItem(boat, 2)

                if #boats > 30 then
                    for i = 1, 5 do pcall(function() if boats[i] then boats[i]:Destroy() end end) end
                    for i = 1, 5 do table.remove(boats, 1) end
                end

                task.wait(0.15)  -- barcos sÃ£o maiores, intervalo um pouco maior
            end

            for _, b in ipairs(boats) do pcall(function() b:Destroy() end) end
        end)
    end,
})

-- â•â• VOID COM SOFÃ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

T.BK:AddParagraph({
    Title   = "ğŸ›‹ï¸ Void com SofÃ¡",
    Content = "VocÃª pega o sofÃ¡, teleporta junto com o alvo pro void.\nO alvo vai junto porque a plataforma em que ele estÃ¡ Ã© movida.",
})

T.BK:AddButton({
    Title = "ğŸ›‹ï¸ Executar Void com SofÃ¡",
    Callback = function()
        local nome = Options.AlvoGeral and Options.AlvoGeral.Value
        local alvo = nome and Players:FindFirstChild(nome)
        if not alvo or not alvo.Character then notify("Erro","Selecione um alvo vÃ¡lido."); return end

        local alvoRoot = alvo.Character:FindFirstChild("HumanoidRootPart")
        local myRoot   = getRoot()
        if not alvoRoot or not myRoot then return end

        local sofa = findTool("Sofa","SofÃ¡","Couch","Furniture","Loveseat","Armchair","Chair")
        if not sofa then notify("Erro ğŸ›‹ï¸","Nenhum sofÃ¡!\nPegue um sofÃ¡ no Brookhaven."); return end

        notify("Void ğŸ›‹ï¸","Iniciando... aguarde ~3 segundos.")

        task.spawn(function()
            -- Equipa sofÃ¡
            local h = getHum()
            if h and sofa:IsA("Tool") then h:EquipTool(sofa); task.wait(0.3) end

            local startPos = myRoot.Position

            -- Fase 1: cria uma plataforma embaixo do alvo e o prende nela
            local platform = Instance.new("Part")
            platform.Size      = Vector3.new(8, 1, 8)
            platform.Anchored  = false
            platform.CanCollide= true
            platform.Material  = Enum.Material.SmoothPlastic
            platform.BrickColor= BrickColor.new("Bright red")
            platform.CFrame    = alvoRoot.CFrame - Vector3.new(0, 3, 0)
            platform.Parent    = workspace
            pcall(function() platform:SetNetworkOwner(LP) end)

            task.wait(0.1)

            -- Fase 2: desce a plataforma (e o alvo em cima) pro void
            local voidY  = -5000
            local steps  = 60

            for i = 1, steps do
                alvoRoot = alvo.Character and alvo.Character:FindFirstChild("HumanoidRootPart")
                myRoot   = getRoot(); if not myRoot then break end

                local t    = i / steps
                local newY = startPos.Y - 3 + (voidY - startPos.Y) * t

                -- Move a plataforma pro void
                pcall(function()
                    platform.CFrame = CFrame.new(startPos.X, newY, startPos.Z)
                end)

                -- VocÃª vai junto (opcional â€” comment se quiser ficar no mapa)
                myRoot.CFrame = CFrame.new(startPos.X + 3, newY + 4, startPos.Z)

                task.wait(0.02)
            end

            platform:Destroy()
            notify("Void ğŸ›‹ï¸","Executado! DÃª respawn para voltar.")
        end)
    end,
})

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                      ABA  VISUAL                               â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

T.Vis:AddToggle("FullBright", {
    Title = "FullBright", Default = false,
    Callback = function(v)
        if v then
            Lighting.Brightness = 10; Lighting.ClockTime = 14
            Lighting.FogEnd = 1e9; Lighting.GlobalShadows = false
            Lighting.Ambient = Color3.fromRGB(255,255,255)
        else for k,val in pairs(ORIG) do Lighting[k] = val end end
    end,
})

T.Vis:AddSlider("FOV", {
    Title = "FOV", Description = "PadrÃ£o: 70", Default = 70, Min = 30, Max = 120, Rounding = 0,
    Callback = function(v) getCam().FieldOfView = v end,
})

con("camfov", workspace:GetPropertyChangedSignal("CurrentCamera"), function()
    task.wait(); if Options.FOV then getCam().FieldOfView = Options.FOV.Value end
end)

-- ESP
local espBoards = {}
local function clearESP()
    for _,v in pairs(espBoards) do pcall(function() v:Destroy() end) end
    espBoards = {}
    for k in pairs(C) do if k:sub(1,4) == "esp_" then dis(k) end end
end

local function buildESP()
    clearESP()
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr == LP then continue end
        local function setup(char)
            if not char then return end; task.wait(1)
            local root = char:FindFirstChild("HumanoidRootPart"); if not root then return end
            local bb = Instance.new("BillboardGui")
            bb.Adornee = root; bb.AlwaysOnTop = true
            bb.Size = UDim2.fromOffset(160,60); bb.StudsOffset = Vector3.new(0,4.5,0); bb.Parent = root

            local bg = Instance.new("Frame",bb)
            bg.BackgroundColor3 = Color3.fromRGB(10,10,12)
            bg.BackgroundTransparency = 0.25; bg.BorderSizePixel = 0; bg.Size = UDim2.fromScale(1,1)
            Instance.new("UICorner",bg).CornerRadius = UDim.new(0,7)

            local function lbl(y,h,cor,font)
                local l = Instance.new("TextLabel",bg)
                l.Size = UDim2.new(1,-4,0,h); l.Position = UDim2.fromOffset(2,y)
                l.BackgroundTransparency = 1; l.TextColor3 = cor
                l.TextStrokeTransparency = 0.4; l.TextScaled = true
                l.Font = font or Enum.Font.Gotham
                l.TextXAlignment = Enum.TextXAlignment.Center; l.Text = "..."
                return l
            end

            local nameL = lbl(2,  22, Color3.fromRGB(255,220,60), Enum.Font.GothamBold)
            local hpL   = lbl(26, 16, Color3.fromRGB(100,255,100))
            local toolL = lbl(44, 14, Color3.fromRGB(200,200,255))
            nameL.Text = plr.DisplayName

            con("esp_"..plr.UserId, RunService.Heartbeat, function()
                local hum = char:FindFirstChildOfClass("Humanoid"); if not hum or not hpL.Parent then return end
                local pct = hum.Health/hum.MaxHealth
                hpL.TextColor3 = Color3.fromRGB(math.floor(255*(1-pct)),math.floor(255*pct),50)
                hpL.Text = ("â¤ %d  (%d%%)"):format(math.floor(hum.Health),math.floor(pct*100))
                local tool = char:FindFirstChildOfClass("Tool")
                toolL.Text = tool and ("ğŸ”§ "..tool.Name) or ""
            end)
            table.insert(espBoards, bb)
        end
        setup(plr.Character); plr.CharacterAdded:Connect(setup)
    end
end

T.Vis:AddToggle("ESP", {
    Title = "ESP  (Nome + HP + Ferramenta)", Default = false,
    Callback = function(v)
        if v then
            buildESP()
            con("esp_add", Players.PlayerAdded, function(p) p.CharacterAdded:Connect(function() task.wait(1); buildESP() end) end)
            con("esp_rem", Players.PlayerRemoving, function() task.wait(0.5); buildESP() end)
        else clearESP(); dis("esp_add"); dis("esp_rem") end
    end,
})

T.Vis:AddToggle("Tracers", {
    Title = "Tracers", Description = "Linha da tela atÃ© cada jogador", Default = false,
    Callback = function(v)
        dis("tracers")
        local sg = LP.PlayerGui:FindFirstChild("_TR"); if sg then sg:Destroy() end
        if not v then return end
        local gui = Instance.new("ScreenGui",LP.PlayerGui)
        gui.Name = "_TR"; gui.ResetOnSpawn = false; gui.IgnoreGuiInset = true
        con("tracers", RunService.RenderStepped, function()
            for _,f in ipairs(gui:GetChildren()) do f:Destroy() end
            local cam = getCam(); local vp = cam.ViewportSize
            local orig = Vector2.new(vp.X/2, vp.Y)
            for _, plr in ipairs(Players:GetPlayers()) do
                if plr == LP then continue end
                local root = plr.Character and plr.Character:FindFirstChild("HumanoidRootPart"); if not root then continue end
                local sp, on = cam:WorldToViewportPoint(root.Position); if not on then continue end
                local delta = Vector2.new(sp.X,sp.Y) - orig
                local line  = Instance.new("Frame",gui)
                line.AnchorPoint = Vector2.new(0,0.5); line.BackgroundColor3 = Color3.fromRGB(255,60,60)
                line.BorderSizePixel = 0; line.Rotation = math.deg(math.atan2(delta.Y,delta.X))
                line.Size = UDim2.fromOffset(delta.Magnitude,2); line.Position = UDim2.fromOffset(orig.X,orig.Y)
            end
        end)
    end,
})

T.Vis:AddToggle("Crosshair", {
    Title = "Crosshair", Default = false,
    Callback = function(v)
        local e = LP.PlayerGui:FindFirstChild("_CH"); if e then e:Destroy() end
        if not v then return end
        local sg = Instance.new("ScreenGui",LP.PlayerGui)
        sg.Name = "_CH"; sg.ResetOnSpawn = false; sg.IgnoreGuiInset = true
        local function bar(w,h,ox,oy)
            local f = Instance.new("Frame",sg); f.BackgroundColor3 = Color3.fromRGB(255,255,255)
            f.BorderSizePixel = 0; f.Size = UDim2.fromOffset(w,h)
            f.Position = UDim2.new(.5,ox-w/2,.5,oy-h/2)
        end
        bar(14,2,0,0); bar(2,14,0,0)
    end,
})

-- Hitbox Highlight (deixa os jogadores com destaque colorido)
T.Vis:AddToggle("HitboxHL", {
    Title = "Hitbox Highlight", Description = "Caixa colorida ao redor de cada jogador",
    Default = false,
    Callback = function(v)
        dis("hitboxhl")
        if not v then
            -- Remove highlights
            for _, plr in ipairs(Players:GetPlayers()) do
                if plr == LP then continue end
                local c = plr.Character; if not c then continue end
                local hl = c:FindFirstChild("_AdminHL"); if hl then hl:Destroy() end
            end
            return
        end
        local function addHL(char)
            if not char then return end; task.wait(0.5)
            if char:FindFirstChild("_AdminHL") then return end
            local hl = Instance.new("SelectionBox", char)
            hl.Name           = "_AdminHL"
            hl.Adornee        = char
            hl.Color3         = Color3.fromRGB(255, 50, 50)
            hl.LineThickness  = 0.06
            hl.SurfaceColor3  = Color3.fromRGB(255, 50, 50)
            hl.SurfaceTransparency = 0.7
        end
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr == LP then continue end
            addHL(plr.Character)
            con("hlchar_"..plr.UserId, plr.CharacterAdded, addHL)
        end
        con("hladd", Players.PlayerAdded, function(p)
            con("hlchar_"..p.UserId, p.CharacterAdded, addHL)
        end)
    end,
})

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                       ABA  MUNDO                               â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

T.Wld:AddSlider("Gravity", {
    Title = "Gravidade", Description = "PadrÃ£o: 196.2",
    Default = 196, Min = 0, Max = 800, Rounding = 0,
    Callback = function(v) workspace.Gravity = v end,
})

local function weather(ct,bright,fe,r,g,b)
    Lighting.ClockTime = ct; Lighting.Brightness = bright
    Lighting.FogEnd = fe; Lighting.Ambient = Color3.fromRGB(r,g,b)
end

T.Wld:AddButton({ Title = "â˜€ï¸ Normal",        Callback = function() weather(14,2,1e6,100,100,100) end })
T.Wld:AddButton({ Title = "ğŸŒ™ Noite Fechada", Callback = function() weather(0,0,200,20,20,60)      end })
T.Wld:AddButton({ Title = "ğŸŒ… PÃ´r do Sol",    Callback = function() weather(18,1.5,800,255,140,60) end })
T.Wld:AddButton({ Title = "ğŸŒŒ Madrugada",     Callback = function() weather(3,0.2,300,30,30,80)    end })
T.Wld:AddButton({ Title = "ğŸŒ«ï¸ NÃ©voa Densa",   Callback = function()
    Lighting.ClockTime = 10; Lighting.FogEnd = 80
    Lighting.FogColor = Color3.fromRGB(180,180,180); Lighting.Brightness = 1
end })
T.Wld:AddButton({ Title = "ğŸ” Resetar Mundo", Callback = function()
    workspace.Gravity = 196.2; Options.Gravity:SetValue(196)
    for k,val in pairs(ORIG) do Lighting[k] = val end
    notify("Reset","Mundo restaurado.")
end })

-- Remover Ã¡gua
T.Wld:AddButton({ Title = "ğŸ’§ Remover Ãgua (local)", Description = "Remove partes de Ã¡gua do mapa localmente",
    Callback = function()
        local count = 0
        for _, obj in ipairs(workspace:GetDescendants()) do
            if obj:IsA("Part") and obj.Material == Enum.Material.Water then
                obj.Transparency = 1; obj.CanCollide = false; count += 1
            end
        end
        notify("Ãgua removida","Total: "..count.." partes.")
    end,
})

-- Remover fog
T.Wld:AddButton({ Title = "ğŸŒ«ï¸ Remover Fog", Callback = function()
    Lighting.FogEnd = 1e9; Lighting.FogStart = 1e9
    notify("Fog","NÃ©voa removida.")
end })

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                        ABA  MISC                               â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

T.Mis:AddButton({ Title = "ğŸ“‹ Copiar PosiÃ§Ã£o", Callback = function()
    local root = getRoot(); if not root then return end
    local p = root.Position
    local str = ("Vector3.new(%.2f, %.2f, %.2f)"):format(p.X,p.Y,p.Z)
    setclipboard(str); notify("Copiado!",str,5)
end })

T.Mis:AddButton({ Title = "ğŸ–¥ï¸ Info do Servidor", Callback = function()
    notify("Info",("Jogadores: %d/%d\nPlace ID: %d\nJob: %s"):format(
        #Players:GetPlayers(), Players.MaxPlayers,
        game.PlaceId, game.JobId:sub(1,14).."..."),8)
end })

T.Mis:AddToggle("DeletePart", {
    Title = "ğŸ—‘ï¸ Deletar Parte (clique)", Default = false,
    Callback = function(v)
        dis("delpart"); if not v then return end
        con("delpart", UserInput.InputBegan, function(inp)
            if inp.UserInputType ~= Enum.UserInputType.MouseButton1 then return end
            if not (Options.DeletePart and Options.DeletePart.Value) then return end
            local target = getMouse().Target
            if target and not Players:GetPlayerFromCharacter(target.Parent) then
                target:Destroy(); notify("Deletado","Parte removida.")
            end
        end)
    end,
})

T.Mis:AddToggle("ClickTP", {
    Title = "âš¡ Click TP (clique em jogador)", Default = false,
    Callback = function(v)
        dis("clicktp"); if not v then return end
        con("clicktp", UserInput.InputBegan, function(inp)
            if inp.UserInputType ~= Enum.UserInputType.MouseButton1 then return end
            if not (Options.ClickTP and Options.ClickTP.Value) then return end
            local target = getMouse().Target; local root = getRoot()
            if not (target and root) then return end
            local char = target:FindFirstAncestorOfClass("Model")
            local plr  = char and Players:GetPlayerFromCharacter(char)
            if plr and plr ~= LP then
                local tr = char:FindFirstChild("HumanoidRootPart")
                if tr then root.CFrame = tr.CFrame + Vector3.new(0,3,0); notify("ClickTP","â†’ "..plr.Name) end
            end
        end)
    end,
})

-- Chat infinito
local chatLoopActive = false
T.Mis:AddToggle("ChatLoop", {
    Title = "ğŸ’¬ Chat Loop", Description = "Envia mensagem repetidamente",
    Default = false,
    Callback = function(v)
        chatLoopActive = v
        if not v then return end
        task.spawn(function()
            while chatLoopActive do
                local msg = Options.ChatMsg and Options.ChatMsg.Value or "oi"
                pcall(function()
                    game:GetService("ReplicatedStorage")
                        .DefaultChatSystemChatEvents
                        .SayMessageRequest:FireServer(msg, "All")
                end)
                task.wait(Options.ChatDelay and Options.ChatDelay.Value or 3)
                if not chatLoopActive then break end
            end
        end)
    end,
})

T.Mis:AddInput("ChatMsg",   { Title = "Mensagem", Default = "brookhaven admin hd", Placeholder = "Digite..." })
T.Mis:AddSlider("ChatDelay",{ Title = "Intervalo (seg)", Default = 3, Min = 1, Max = 30, Rounding = 0 })

-- Rejoin rÃ¡pido
T.Mis:AddButton({ Title = "ğŸ”„ Rejoin (mesma server)", Callback = function()
    local id = game.JobId
    local placeId = game.PlaceId
    notify("Rejoin","Entrando de volta na mesma server...",3)
    task.wait(1)
    game:GetService("TeleportService"):TeleportToPlaceInstance(placeId, id, LP)
end })

-- Remover todos os AdminBalls e AdminBoats
T.Mis:AddButton({ Title = "ğŸ§¹ Limpar Bolas/Barcos criados", Callback = function()
    local count = 0
    for _, obj in ipairs(workspace:GetChildren()) do
        if obj.Name == "AdminBall" or obj.Name == "AdminBoat" then
            obj:Destroy(); count += 1
        end
    end
    notify("Limpeza","Removidos "..count.." objetos.")
end })

-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘                 SAVE / INTERFACE MANAGER                       â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})
InterfaceManager:SetFolder("FluentHub")
SaveManager:SetFolder("FluentHub/BrookhavenV9")
InterfaceManager:BuildInterfaceSection(T.Cfg)
SaveManager:BuildConfigSection(T.Cfg)

Window:SelectTab(1)
SaveManager:LoadAutoloadConfig()

notify(
    "Brookhaven Admin HD  v9 ğŸ”¥",
    ("Carregado com sucesso!\n%d jogadores  Â·  RCtrl = minimizar"):format(#Players:GetPlayers()),
    7
)
